{"ast":null,"code":"import _slicedToArray from\"/Users/liam/Documents/Webapps/project-tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Head from'next/head';import styles from'../styles/Home.module.css';import Cotter from\"cotter\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var cotterApiKeyId=process.env.NEXT_PUBLIC_COTTER_API_KEY_ID;export default function Home(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoggedIn=_useState2[0],setIsLoggedIn=_useState2[1];// Shows the Cotter Login form and sets Access Token when authenticated\nuseEffect(function(){var cotter=new Cotter(cotterApiKeyId);cotter.signInWithOTP().showEmailForm().then(function(payload){localStorage.setItem(\"ACCESS_TOKEN\",payload.oauth_token.access_token);setIsLoggedIn(true);}).catch(function(err){return console.log(err);});},[]);// Sets local isLoggedIn variable\nuseEffect(function(){if(localStorage.getItem(\"ACCESS_TOKEN\")!=null){setIsLoggedIn(true);}},[]);// Deletes Access Token and logs user out\nvar logOut=function logOut(){localStorage.removeItem(\"ACCESS_TOKEN\");setIsLoggedIn(false);};// Display the client portal page\nreturn/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsxs(Head,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"Client Portal\"}),/*#__PURE__*/_jsx(\"link\",{rel:\"icon\",href:\"/favicon.ico\"})]}),/*#__PURE__*/_jsxs(\"main\",{className:styles.main,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:\"Welcome to Your Client Portal\"}),isLoggedIn?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\",cursor:\"pointer\"},onClick:logOut,children:\"Log Out\"})}):/*#__PURE__*/_jsx(\"p\",{children:\"Log in to view your projects.\"}),/*#__PURE__*/_jsx(\"div\",{id:\"cotter-form-container\",style:{width:300,height:200}})]})]});}","map":{"version":3,"sources":["/Users/liam/Documents/Webapps/project-tracker/src/index.js"],"names":["Head","styles","Cotter","useEffect","useState","cotterApiKeyId","process","env","NEXT_PUBLIC_COTTER_API_KEY_ID","Home","isLoggedIn","setIsLoggedIn","cotter","signInWithOTP","showEmailForm","then","payload","localStorage","setItem","oauth_token","access_token","catch","err","console","log","getItem","logOut","removeItem","container","main","title","textAlign","cursor","width","height"],"mappings":"gIAAA,MAAOA,CAAAA,IAAP,KAAiB,WAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,2BAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,C,wFACA,GAAMC,CAAAA,cAAc,CAAGC,OAAO,CAACC,GAAR,CAAYC,6BAAnC,CAEA,cAAe,SAASC,CAAAA,IAAT,EAAgB,CAC3B,cAAoCL,QAAQ,CAAC,KAAD,CAA5C,wCAAOM,UAAP,eAAmBC,aAAnB,eAEA;AACAR,SAAS,CAAC,UAAM,CACZ,GAAMS,CAAAA,MAAM,CAAG,GAAIV,CAAAA,MAAJ,CAAWG,cAAX,CAAf,CACAO,MAAM,CACDC,aADL,GAEKC,aAFL,GAGKC,IAHL,CAGU,SAAAC,OAAO,CAAI,CACbC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAqCF,OAAO,CAACG,WAAR,CAAoBC,YAAzD,EACAT,aAAa,CAAC,IAAD,CAAb,CACH,CANL,EAOKU,KAPL,CAOW,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAPd,EAQH,CAVQ,CAUN,EAVM,CAAT,CAYA;AACAnB,SAAS,CAAC,UAAM,CACZ,GAAIc,YAAY,CAACQ,OAAb,CAAqB,cAArB,GAAwC,IAA5C,CAAkD,CAC9Cd,aAAa,CAAC,IAAD,CAAb,CACH,CACJ,CAJQ,CAIN,EAJM,CAAT,CAMA;AACA,GAAMe,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjBT,YAAY,CAACU,UAAb,CAAwB,cAAxB,EACAhB,aAAa,CAAC,KAAD,CAAb,CACH,CAHD,CAKA;AACA,mBACI,aAAK,SAAS,CAAEV,MAAM,CAAC2B,SAAvB,wBACI,MAAC,IAAD,yBACI,wCADJ,cAEI,aAAM,GAAG,CAAC,MAAV,CAAiB,IAAI,CAAC,cAAtB,EAFJ,GADJ,cAMI,cAAM,SAAS,CAAE3B,MAAM,CAAC4B,IAAxB,wBACI,WAAI,SAAS,CAAE5B,MAAM,CAAC6B,KAAtB,2CADJ,CAEKpB,UAAU,cACP,kCACI,UAAG,KAAK,CAAE,CAACqB,SAAS,CAAE,QAAZ,CAAsBC,MAAM,CAAE,SAA9B,CAAV,CAAoD,OAAO,CAAEN,MAA7D,qBADJ,EADO,cAIP,oDANR,cAOI,YAAK,EAAE,CAAC,uBAAR,CAAgC,KAAK,CAAE,CAAEO,KAAK,CAAE,GAAT,CAAcC,MAAM,CAAE,GAAtB,CAAvC,EAPJ,GANJ,GADJ,CAkBH","sourcesContent":["import Head from 'next/head'\nimport styles from '../styles/Home.module.css'\nimport Cotter from \"cotter\";\nimport { useEffect, useState } from \"react\";\nconst cotterApiKeyId = process.env.NEXT_PUBLIC_COTTER_API_KEY_ID;\n\nexport default function Home() {\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n    // Shows the Cotter Login form and sets Access Token when authenticated\n    useEffect(() => {\n        const cotter = new Cotter(cotterApiKeyId);\n        cotter\n            .signInWithOTP()\n            .showEmailForm()\n            .then(payload => {\n                localStorage.setItem(\"ACCESS_TOKEN\", payload.oauth_token.access_token);\n                setIsLoggedIn(true);\n            })\n            .catch(err => console.log(err));\n    }, []);\n\n    // Sets local isLoggedIn variable\n    useEffect(() => {\n        if (localStorage.getItem(\"ACCESS_TOKEN\") != null) {\n            setIsLoggedIn(true);\n        }\n    }, []);\n\n    // Deletes Access Token and logs user out\n    const logOut = () => {\n        localStorage.removeItem(\"ACCESS_TOKEN\");\n        setIsLoggedIn(false);\n    };\n\n    // Display the client portal page\n    return (\n        <div className={styles.container}>\n            <Head>\n                <title>Client Portal</title>\n                <link rel=\"icon\" href=\"/favicon.ico\"/>\n            </Head>\n\n            <main className={styles.main}>\n                <h1 className={styles.title}>Welcome to Your Client Portal</h1>\n                {isLoggedIn ? (\n                    <div>\n                        <p style={{textAlign: \"center\", cursor: \"pointer\"}} onClick={logOut}>Log Out</p>\n                    </div>\n                ): (<p>Log in to view your projects.</p>)}\n                <div id=\"cotter-form-container\" style={{ width: 300, height: 200 }} />\n            </main>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}